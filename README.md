Docker Practice Project

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ä–∞–±–æ—Ç—É –ø–æ –æ—Å–≤–æ–µ–Ω–∏—é Docker, –≤–∫–ª—é—á–∞—é—â—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ nginx, —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–∏–Ω–∏-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ C —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastCGI, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ Docker-–æ–±—Ä–∞–∑–∞, –ø—Ä–æ–≤–µ—Ä–∫—É –µ–≥–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é Dockle –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ Docker Compose.


üöÄ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ 6 —á–∞—Å—Ç–µ–π, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ—à–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏:

–ì–æ—Ç–æ–≤—ã–π –¥–æ–∫–µ—Ä ‚Äì –†–∞–±–æ—Ç–∞ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –æ–±—Ä–∞–∑–æ–º nginx (–∑–∞–ø—É—Å–∫, –ø—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤).

–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º ‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—É—Å–∞.

–ú–∏–Ω–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä ‚Äì –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ C —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastCGI.

–°–≤–æ–π –¥–æ–∫–µ—Ä ‚Äì –ù–∞–ø–∏—Å–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ Docker-–æ–±—Ä–∞–∑–∞ –¥–ª—è –º–∏–Ω–∏-—Å–µ—Ä–≤–µ—Ä–∞ –∏ nginx.

Dockle ‚Äì –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–∞ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

Docker Compose ‚Äì –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.


üìå –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker –∏ Docker Compose.
‚úÖ –£—Ç–∏–ª–∏—Ç–∞ Dockle –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —á–∞—Å—Ç–∏ 5).
‚úÖ –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä gcc –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ libfcgi-dev –¥–ª—è —Å–±–æ—Ä–∫–∏ –º–∏–Ω–∏-—Å–µ—Ä–≤–µ—Ä–∞.
‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –ø–æ—Ä—Ç–∞–º 80, 81, 443, 8080.

üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

üîπ –ß–∞—Å—Ç—å 1: –ì–æ—Ç–æ–≤—ã–π –¥–æ–∫–µ—Ä

–í—ã–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑ nginx:

docker pull nginx

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ–±—Ä–∞–∑–∞:

docker images

–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

docker run -d nginx

üìå –ü–æ–¥—Ä–æ–±–Ω—ã–µ —à–∞–≥–∏ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ–º–∞–Ω–¥ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—Ç—á–µ—Ç–µ.

üîπ –ß–∞—Å—Ç—å 2: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å nginx.conf –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã /status.

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å nginx –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

docker exec [container_id] nginx -s reload

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É http://localhost:80/status.

üîπ –ß–∞—Å—Ç—å 3: –ú–∏–Ω–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä

–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä:

gcc src/server.c -o server -lfcgi

–ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ spawn-fcgi:

spawn-fcgi -p 8080 ./server

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ nginx/nginx.conf —Å –ø–æ—Ä—Ç–∞ 81 –Ω–∞ 8080.

üîπ –ß–∞—Å—Ç—å 4: –°–≤–æ–π –¥–æ–∫–µ—Ä

–°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑:

docker build -t my-nginx-server:1.0 .

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –ø–æ—Ä—Ç–æ–≤ –∏ –ø–∞–ø–∫–∏:

docker run -d -p 80:81 -v $(pwd)/nginx:/etc/nginx/conf.d my-nginx-server:1.0

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å http://localhost:80 –∏ http://localhost:80/status.

üîπ –ß–∞—Å—Ç—å 5: Dockle

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–∑:

dockle my-nginx-server:1.0

–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å .dockerignore, —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏).

üîπ –ß–∞—Å—Ç—å 6: Docker Compose

–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç:

docker-compose up --build

üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –∏–∑–º–µ–Ω—è–π—Ç–µ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–π—Ç–µ!


